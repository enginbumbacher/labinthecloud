<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Euglena Modeling</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      /* https://projects.lukehaas.me/css-loaders/ */
      .loader,
      .loader:before,
      .loader:after {
        border-radius: 50%;
        width: 2.5em;
        height: 2.5em;
        -webkit-animation-fill-mode: both;
        animation-fill-mode: both;
        -webkit-animation: load7 1.8s infinite ease-in-out;
        animation: load7 1.8s infinite ease-in-out;
      }
      .loader {
        color: #000000;
        font-size: 10px;
        margin: 80px auto;
        position: relative;
        text-indent: -9999em;
        -webkit-transform: translateZ(0);
        -ms-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-animation-delay: -0.16s;
        animation-delay: -0.16s;
      }
      .loader:before,
      .loader:after {
        content: '';
        position: absolute;
        top: 0;
      }
      .loader:before {
        left: -3.5em;
        -webkit-animation-delay: -0.32s;
        animation-delay: -0.32s;
      }
      .loader:after {
        left: 3.5em;
      }
      @-webkit-keyframes .loader {
        0%,
        80%,
        100% {
          box-shadow: 0 2.5em 0 -1.3em;
        }
        40% {
          box-shadow: 0 2.5em 0 0;
        }
      }
      @keyframes load7 {
        0%,
        80%,
        100% {
          box-shadow: 0 2.5em 0 -1.3em;
        }
        40% {
          box-shadow: 0 2.5em 0 0;
        }
      }
    </style>
  </head>
  <body>
    <xml xmlns="http://www.w3.org/1999/xhtml" id="toolbox" style="display: none;">
      <category name="Behaving" colour="#C55A11">
        <block type="forward_speed" id='forward_speed' disabled='false' max_use='0' sensors='both'>
          <field name="SPEED">5</field>
        </block>
        <block type="roll_speed" id="roll_speed" disabled='false' max_use='0' sensors='both'>
          <field name="SPEED">5</field>
        </block>
        <block type="turn_lr" id="turn_lr" disabled='false' max_use='2' sensors='both'>
          <field name="DIRECTION">LEFT</field>
        </block>
        <block type="turn_at_1sensor" id="turn_at_1sensor" disabled='false' max_use='2' sensors='one'>
          <field name="DIRECTION">TOWARDS</field>
          <field name="OBJECT">SENSOR</field>
        </block>
        <block type="turn_at_2sensors" id="turn_at_2sensors" disabled='false' max_use='2' sensors='two'>
          <field name="DIRECTION">TOWARDS</field>
          <field name="OBJECT">STRONGER</field>
        </block>
        <block type="stop_forward" id="stop_forward" disabled='false' max_use='2' sensors='both'></block>
        <block type="stop_rolling" id="stop_rolling" disabled='false' max_use='2' sensors='both'></block>
        <block type="turn_randomly" id="turn_randomly" disabled='false' max_use='2' sensors='both'></block>
      </category>
      <category name="Sensing" colour="#805ba5">
        <block class='sensing' type="see_light" id="see_light" disabled='false' max_use='1' sensors='both'>
          <field name='THRESHOLD'>0</field>
        </block>
      </category>
      <category name="Quantities" colour="#5ba5a5">
        <block type="qual_absolute" id="qual_absolute" disabled='false' max_use='0' sensors='both'>
          <field name="MAGNITUDE">VERY_SMALL</field>
        </block>
        <block type="modifier_rand" id="modifier_rand" disabled='false' max_use='0' sensors='both'></block>
        <block type="math_number" id="math_number" disabled='false' max_use='0' sensors='both'>
          <field name="NUM">0</field>
        </block>
        <block type="quant_prop_1sensor" id="quant_prop_1sensor" disabled='false' max_use='0' sensors='one'>
          <field name="FACTOR">LIGHT_DIFF</field>
        </block>
        <block type="quant_prop_2sensors" id="quant_prop_2sensors" disabled='false' max_use='0' sensors='two'>
          <field name="FACTOR">LIGHT_DIFF</field>
        </block>
      </category>
      <category name="Processing" colour="#5AB8A5">
      </category>
      <category name="Programming" colour="#5b6da5">
        <block type="text" id="text" disabled='false' max_use='0' sensors='both'>
          <field name="TEXT"></field>
        </block>
        <block type="colour_picker" id="colour_picker" disabled='false' max_use='0' sensors='both'>
          <field name="COLOUR">#ff0000</field>
        </block>
        <block type="controls_if" id="controls_if" disabled='false' max_use='0' sensors='both'></block>
      </category>
    </xml>
    <xml xmlns="http://www.w3.org/1999/xhtml" id="defaultWorkspaceBlocks" style="display:none">
      <variables></variables>
      <block type="every_time" id="XN3[kHW+k6_69-gU$#lo" x="63" y="63" max_use='0' sensors='both'></block>
    </xml>
    <div class="loader">Loading..</div>
    <script src="/cslib/thirdparty/blockly/blockly_compressed.js"></script>
    <script src="/cslib/thirdparty/blockly/blocks_compressed.js"></script>
    <script src="/cslib/thirdparty/blockly/javascript_compressed.js"></script>
    <script src="/cslib/thirdparty/blockly/msg/js/en.js"></script>
    <script src="/cslib/module/euglena/model_blockly/modeling_blocks.js"></script>

    <script type="text/javascript">
      window.EuglenaConfig = {
        system: {
          maxLoginTime: 0,
          experimentModality: 'create', // 'observe','explore','create', 'createAndHistory'
          modelModality: 'create', // 'observe','explore','create'
          expModelModality: 'simultaneous', //'simultaneous','sequential' - for seeing model and live not together
          enableDirectComparison: true // false: cannot do direct comparison between models
        },
        experiment: {
          maxDuration: 60,
          bpuId: "eug3", //"eug10"
          euglenaServerMode:"demo"
          //,experimentHistory
        },
        model: {
          tabs: [{
            modelType: "blockly",
            color: 0x2222ff,
            modelModality: 'functional', // 'mechanistic' or 'functional'
            parameters: {
              allowedConfigs: [],//['alldirections_frontleft','alldirections_frontcenter_shield_left','directed_frontleft','2_directed_front'],
              bodyConfiguration: {
                label: "Photoreceptors",
                color: '#7030A0',
                initialValue: "sensorConfig_1",
              },
              opacity: {
                label: "Body Opacity",
                color: '#759364',
                initialValue: 'opacity_20',
                maxValue: 1.0,
                options: {'opacity_0': '0 percent', 'opacity_20': '20 percent', 'opacity_40': '40 percent', 'opacity_60': '60 percent', 'opacity_80': '80 percent', 'opacity_100': '100 percent'}
              },
              K: {
                label: "Reaction Strength", // If mechanistic: "Reaction Strength", if functional: "Reaction Speed"
                color: '#2F5597',
                initialValue: 'reaction_25',
                maxValue: 2,
                options: {'reaction_25': 'weak', 'reaction_50': 'medium', 'reaction_75': 'strong', 'reaction_100': 'very strong'}
                // If mechanistic: {'reaction_25': 'weak', 'reaction_50': 'medium', 'reaction_75': 'strong', 'reaction_100': 'very strong'}
                // If functional: {'reaction_25': 'slow', 'reaction_50': 'medium', 'reaction_75': 'fast', 'reaction_100': 'very fast'}
              },
              v: {
                label: "Motor Strength", // If mechanistic: "Motor Strength", if functional: "Motor Speed"
                color: '#C00000',
                initialValue: 'forward_25',
                maxValue: 10,
                options: {'forward_25': 'weak', 'forward_50': 'medium', 'forward_75': 'strong', 'forward_100': 'very strong'}
                // If mechanistic: {'forward_25': 'weak', 'forward_50': 'medium', 'forward_75': 'strong', 'forward_100': 'very strong'}
                // If functional: {'forward_25': 'slow', 'forward_50': 'medium', 'forward_75': 'fast', 'forward_100': 'very fast'}
              },
              omega: {
                label: "Roll Strength", // If mechanistic: "Roll Strength", if functional: "Roll Speed"
                color: '#C55A11',
                initialValue: 'roll_25',
                maxValue: 5,
                options: {'roll_25': 'weak', 'roll_50': 'medium', 'roll_75': 'strong', 'roll_100': 'very strong'}
                // If mechanistic: {'roll_25': 'weak', 'roll_50': 'medium', 'roll_75': 'strong', 'roll_100': 'very strong'}
                // If functional: {'roll_25': 'slow', 'roll_50': 'medium', 'roll_75': 'fast', 'roll_100': 'very fast'}
              },
              variation: {
                label: "Variation btw Euglena:", // If mechanistic: "Roll Strength", if functional: "Roll Speed"
                initialValue: 'variation_25',
                maxValue: 0.6,
                options: {'variation_25': 'small', 'variation_50': 'medium', 'variation_75': 'large', 'variation_100': 'very large'}
                // If mechanistic: {'roll_25': 'weak', 'roll_50': 'medium', 'roll_75': 'strong', 'roll_100': 'very strong'}
                // If functional: {'roll_25': 'slow', 'roll_50': 'medium', 'roll_75': 'fast', 'roll_100': 'very fast'}
              }
            }
          }
        ],
          euglenaCount: {
            options: [1,2,5,30],
            initialValue: 1
          },
          simulationFps: 12
        },
        visualization: {
           visualizationTypes: [
          {
            id: "circle",
            label: "Circle",
            settings: {
              binCount: 24, //15Â° bins
              dT: 2,
              tStep: 0.5,
              width: 160,
              height: 160
            }
          }, {
            id: "histogram",
            label: "Histogram",
            settings: {
              binCount: 10,
              vRange: null,
              mode: 'component',
              dT: 2,
              tStep: 1,

              width: 300,
              height: 160
            }
          }, {
            id: "timeseries",
            label: "Time Series",
            settings: {
              vRange: null,
              mode: 'component',
              stdBand: true,
              dT: 1,

              width: 300,
              height: 200
            }
          }
        ]
        },
        aggregate: {
         timeWindow: 2
       },
       modeling: {
        timeWindow: 2
       }
      };
    </script>
    <script data-main="./cslib/init" src="./cslib/thirdparty/require/require.js"></script>
  </body>
</html>
